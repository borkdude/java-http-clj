<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>java-http-clj.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Java-http-clj</span> <span class="project-version">0.3.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="java-http-clj.core.html"><div class="inner"><span>java-http-clj.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="java-http-clj.core.html#var-build-client"><div class="inner"><span>build-client</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-build-request"><div class="inner"><span>build-request</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-client-builder"><div class="inner"><span>client-builder</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-default-client"><div class="inner"><span>default-client</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-delete"><div class="inner"><span>delete</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-get"><div class="inner"><span>get</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-head"><div class="inner"><span>head</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-post"><div class="inner"><span>post</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-put"><div class="inner"><span>put</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-request-builder"><div class="inner"><span>request-builder</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-response-.3Emap"><div class="inner"><span>response-&gt;map</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-send"><div class="inner"><span>send</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-send-async"><div class="inner"><span>send-async</span></div></a></li><li class="depth-1"><a href="java-http-clj.core.html#var-spec-shorthand"><div class="inner"><span>spec-shorthand</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">java-http-clj.core</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-build-client"><h3>build-client</h3><div class="usage"><code>(build-client)</code><code>(build-client opts)</code></div><div class="doc"><div class="markdown"><p>Builds a client with the supplied options. See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.Builder.html">HttpClient.Builder</a> for a more detailed description of the options.</p>
<p>The <code>opts</code> map takes the following keys:</p>
<ul>
  <li><code>:connect-timeout</code> - connection timeout in milliseconds or a <code>java.time.Duration</code></li>
  <li><code>:cookie-handler</code> - a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/CookieHandler.html">java.net.CookieHandler</a></li>
  <li><code>:executor</code> - a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executor.html">java.util.concurrent.Executor</a></li>
  <li><code>:follow-redirects</code> - one of <code>:always</code>, <code>:never</code> and <code>:normal</code>. Maps to the corresponding <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.Redirect.html">HttpClient.Redirect</a> enum.</li>
  <li><code>:priority</code> - the <a href="https://developers.google.com/web/fundamentals/performance/http2/#stream_prioritization">priority</a> of the request (only used for HTTP/2 requests)</li>
  <li><code>:proxy</code> - a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/ProxySelector.html">java.net.ProxySelector</a></li>
  <li><code>:ssl-context</code> - a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/SSLContext.html">javax.net.ssl.SSLContext</a></li>
  <li><code>:ssl-parameters</code> - a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/SSLParameters.html">javax.net.ssl.SSLParameters</a></li>
  <li><code>:version</code> - the HTTP protocol version, one of <code>:http1.1</code> or <code>:http2</code></li>
</ul>
<p>Equivalent to <code>(.build (client-builder opts))</code>.</p></div></div></div><div class="public anchor" id="var-build-request"><h3>build-request</h3><div class="usage"><code>(build-request)</code><code>(build-request req-map)</code></div><div class="doc"><div class="markdown"><p>Builds a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.html">java.net.http.HttpRequest</a> from a map.</p>
<p>See <a href="java-http-clj.core.html#var-send">send</a> for a description of <code>req-map</code>.</p>
<p>Equivalent to <code>(.build (request-builder req-map))</code>.</p></div></div></div><div class="public anchor" id="var-client-builder"><h3>client-builder</h3><div class="usage"><code>(client-builder)</code><code>(client-builder opts)</code></div><div class="doc"><div class="markdown"><p>Same as <a href="java-http-clj.core.html#var-build-client">build-client</a>, but returns a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.Builder.html">HttpClient.Builder</a> instead of a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html">HttpClient</a>.</p>
<p>See <a href="java-http-clj.core.html#var-build-client">build-client</a> for a description of <code>opts</code>.</p></div></div></div><div class="public anchor" id="var-default-client"><h3>default-client</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Used for requests unless a client is explicitly passed. Equal to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html#newHttpClient%28%29">HttpClient.newHttpClient()</a>.</p></div></div></div><div class="public anchor" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete uri)</code><code>(delete uri req-map)</code><code>(delete uri req-map opts)</code></div><div class="doc"><div class="markdown"><p>Sends a DELETE request to <code>uri</code>.</p>
<p>See <a href="java-http-clj.core.html#var-send">send</a> for a description of <code>req-map</code> and <code>opts</code>.</p></div></div></div><div class="public anchor" id="var-get"><h3>get</h3><div class="usage"><code>(get uri)</code><code>(get uri req-map)</code><code>(get uri req-map opts)</code></div><div class="doc"><div class="markdown"><p>Sends a GET request to <code>uri</code>.</p>
<p>See <a href="java-http-clj.core.html#var-send">send</a> for a description of <code>req-map</code> and <code>opts</code>.</p></div></div></div><div class="public anchor" id="var-head"><h3>head</h3><div class="usage"><code>(head uri)</code><code>(head uri req-map)</code><code>(head uri req-map opts)</code></div><div class="doc"><div class="markdown"><p>Sends a HEAD request to <code>uri</code>.</p>
<p>See <a href="java-http-clj.core.html#var-send">send</a> for a description of <code>req-map</code> and <code>opts</code>.</p></div></div></div><div class="public anchor" id="var-post"><h3>post</h3><div class="usage"><code>(post uri)</code><code>(post uri req-map)</code><code>(post uri req-map opts)</code></div><div class="doc"><div class="markdown"><p>Sends a POST request to <code>uri</code>.</p>
<p>See <a href="java-http-clj.core.html#var-send">send</a> for a description of <code>req-map</code> and <code>opts</code>.</p></div></div></div><div class="public anchor" id="var-put"><h3>put</h3><div class="usage"><code>(put uri)</code><code>(put uri req-map)</code><code>(put uri req-map opts)</code></div><div class="doc"><div class="markdown"><p>Sends a PUT request to <code>uri</code>.</p>
<p>See <a href="java-http-clj.core.html#var-send">send</a> for a description of <code>req-map</code> and <code>opts</code>.</p></div></div></div><div class="public anchor" id="var-request-builder"><h3>request-builder</h3><div class="usage"><code>(request-builder opts)</code></div><div class="doc"><div class="markdown"><p>Same as <a href="java-http-clj.core.html#var-build-request">build-request</a>, but returns a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.Builder.html">HttpRequest.Builder</a> instead of a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.html">HttpRequest</a>.</p></div></div></div><div class="public anchor" id="var-response-.3Emap"><h3>response-&gt;map</h3><div class="usage"><code>(response-&gt;map resp)</code></div><div class="doc"><div class="markdown"><p>Converts a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpResponse.html">HttpResponse</a> into a map.</p>
<p>The response map contains the following keys:</p>
<ul>
  <li><code>:body</code> - the response body</li>
  <li><code>:headers</code> - the HTTP headers, a map where keys are strings and values are strings or a list of strings</li>
  <li><code>:status</code> - the HTTP status code</li>
  <li><code>:version</code> - the HTTP protocol version, one of <code>:http1.1</code> or <code>:http2</code></li>
</ul></div></div></div><div class="public anchor" id="var-send"><h3>send</h3><div class="usage"><code>(send req)</code><code>(send req {:keys [as client raw?], :as opts})</code></div><div class="doc"><div class="markdown"><p>Sends a HTTP request and blocks until a response is returned or the request takes longer than the specified <code>timeout</code>. If the request times out, a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpTimeoutException.html">HttpTimeoutException</a> is thrown.</p>
<p>The <code>req</code> parameter can be a either string URL, a request map, or a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.html">java.net.http.HttpRequest</a>.</p>
<p>The request map takes the following keys:</p>
<ul>
  <li><code>:body</code> - the request body. Can be a string, a primitive Java byte array or a java.io.InputStream.</li>
  <li><code>:expect-continue?</code> - See the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.Builder.html#expectContinue%28boolean%29">javadoc</a></li>
  <li><code>:headers</code> - the HTTP headers, a map where keys are strings and values are strings or a list of strings</li>
  <li><code>:method</code> - the HTTP method as a keyword (e.g <code>:get</code>, <code>:put</code>, <code>:post</code>)</li>
  <li><code>:timeout</code> - the request timeout in milliseconds or a <code>java.time.Duration</code></li>
  <li><code>:uri</code> - the request uri</li>
  <li><code>:version</code> - the HTTP protocol version, one of <code>:http1.1</code> or <code>:http2</code></li>
</ul>
<p><code>opts</code> is a map containing one of the following keywords:</p>
<ul>
  <li>
    <p><code>:as</code> - converts the response body to one of the following formats:</p>
    <ul>
      <li><code>:string</code> - a java.lang.String (default)</li>
      <li><code>:byte-array</code> - a Java primitive byte array.</li>
      <li><code>:input-stream</code> - a java.io.InputStream.</li>
    </ul>
  </li>
  <li>
  <p><code>:client</code> - the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html">HttpClient</a> to use for the request. If not provided the <a href="java-http-clj.core.html#var-default-client">default-client</a> will be used.</p></li>
  <li>
  <p><code>:raw?</code> - if true, skip the Ring format conversion and return the [HttpResponse](<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpResponse.html">https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpResponse.html</a></p></li>
</ul></div></div></div><div class="public anchor" id="var-send-async"><h3>send-async</h3><div class="usage"><code>(send-async req)</code><code>(send-async req opts)</code><code>(send-async req {:keys [as client raw?], :as opts} callback ex-handler)</code></div><div class="doc"><div class="markdown"><p>Sends a request asynchronously and immediately returns a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html">CompletableFuture</a>. Converts the  eventual response to a map as per <a href="java-http-clj.core.html#var-response-.3Emap">response-&gt;map</a>.</p>
<p>See <a href="java-http-clj.core.html#var-send">send</a> for a description of <code>req</code> and <code>opts</code>.</p>
<p><code>callback</code> is a one argument function that will be applied to the response on completion.</p>
<p><code>ex-handler</code> is a one argument function that will be called if an exception is thrown anywhere during the request.</p></div></div></div><div class="public anchor" id="var-spec-shorthand"><h3>spec-shorthand</h3><div class="usage"><code>(spec-shorthand method)</code></div><div class="doc"><div class="markdown"></div></div></div></div></body></html>