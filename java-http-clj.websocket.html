<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>java-http-clj.websocket documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Java-http-clj</span> <span class="project-version">0.4.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>java-http-clj</span></div></div></li><li class="depth-2 branch"><a href="java-http-clj.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 current"><a href="java-http-clj.websocket.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websocket</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="java-http-clj.websocket.html#var-build-websocket"><div class="inner"><span>build-websocket</span></div></a></li><li class="depth-1"><a href="java-http-clj.websocket.html#var-build-websocket-async"><div class="inner"><span>build-websocket-async</span></div></a></li><li class="depth-1"><a href="java-http-clj.websocket.html#var-close"><div class="inner"><span>close</span></div></a></li><li class="depth-1"><a href="java-http-clj.websocket.html#var-send"><div class="inner"><span>send</span></div></a></li><li class="depth-1"><a href="java-http-clj.websocket.html#var-send-async"><div class="inner"><span>send-async</span></div></a></li><li class="depth-1"><a href="java-http-clj.websocket.html#var-websocket-builder"><div class="inner"><span>websocket-builder</span></div></a></li><li class="depth-1"><a href="java-http-clj.websocket.html#var-websocket-listener"><div class="inner"><span>websocket-listener</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">java-http-clj.websocket</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-build-websocket"><h3>build-websocket</h3><div class="usage"><code>(build-websocket uri listener-fns)</code><code>(build-websocket uri listener-fns builder-opts)</code></div><div class="doc"><div class="markdown"><p>Builds a new <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.html">WebSocket</a> with the provided options.</p>
<ul>
  <li><code>uri</code> - The URI to connect to</li>
  <li><code>listener-fns</code> - see <a href="java-http-clj.websocket.html#var-websocket-listener">websocket-listener</a></li>
  <li><code>builder-opts</code> - see <a href="java-http-clj.websocket.html#var-websocket-builder">websocket-builder</a></li>
</ul></div></div></div><div class="public anchor" id="var-build-websocket-async"><h3>build-websocket-async</h3><div class="usage"><code>(build-websocket-async uri listener-fns)</code><code>(build-websocket-async uri listener-fns builder-opts)</code></div><div class="doc"><div class="markdown"><p>Same as <a href="java-http-clj.websocket.html#var-build-websocket">build-websocket</a>, but returns a <code>CompletableFuture&lt;WebSocket&gt;</code> instead of <code>WebSocket</code>.</p></div></div></div><div class="public anchor" id="var-close"><h3>close</h3><div class="usage"><code>(close ws)</code><code>(close ws status-code)</code><code>(close ws status-code reason)</code></div><div class="doc"><div class="markdown"><p>Closes the output of the websocket with the supplied status code and reason. If not provided, <code>status-code</code> defaults to 1000 (normal closure) and <code>reason</code> defaults to empty string.</p>
<p>Equivalent to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.html#sendClose%28int,java.lang.String%29">sendClose</a>.</p></div></div></div><div class="public anchor" id="var-send"><h3>send</h3><div class="usage"><code>(send ws payload)</code><code>(send ws payload last?)</code></div><div class="doc"><div class="markdown"><p>Synchronously send data over the websocket and then returns the websocket. <code>payload</code> can be any of:</p>
<ul>
  <li>a string - sent with <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.html#sendText%28java.lang.CharSequence,boolean%29">sendText</a></li>
  <li>a byte array - converted into a ByteBuffer and sent with <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.html#sendBinary%28java.nio.ByteBuffer,boolean%29">sendBinary</a></li>
  <li>a ByteBufer - sent with <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.html#sendBinary%28java.nio.ByteBuffer,boolean%29">sendBinary</a></li>
</ul>
<p>Any other argument type will be coerced to a string with <code>str</code> and sent with <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.html#sendText%28java.lang.CharSequence,boolean%29">sendText</a>.</p>
<p><code>last?</code> is a boolean that indicates whether this invocation completes the message. Defaults to <code>true</code>.</p></div></div></div><div class="public anchor" id="var-send-async"><h3>send-async</h3><div class="usage"><code>(send-async ws payload)</code><code>(send-async ws payload last?)</code></div><div class="doc"><div class="markdown"><p>Same as <a href="java-http-clj.websocket.html#var-send">send</a>, but returns a <code>CompletableFuture&lt;WebSocket&gt;</code> instead of <code>WebSocket</code>.</p></div></div></div><div class="public anchor" id="var-websocket-builder"><h3>websocket-builder</h3><div class="usage"><code>(websocket-builder)</code><code>(websocket-builder {:keys [client connect-timeout headers subprotocols]})</code></div><div class="doc"><div class="markdown"><p>Builds a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Builder.html">Websocket.Builder</a>.</p>
<p><code>opts</code> is a map containing one of the following keywords:</p>
<ul>
  <li><code>:client</code> - the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html">HttpClient</a> to create the connect with, defaults to <a href="java-http-clj.core.html#var-default-client">default-client</a></li>
  <li><code>:connect-timeout</code> - connection timeout in milliseconds or a <code>java.time.Duration</code></li>
  <li><code>:headers</code> - the HTTP headers, a map where keys are strings and values are strings or a list of strings</li>
  <li><code>:subprotocols</code> - a string sequence of subprotocols to use in order of preferences</li>
</ul></div></div></div><div class="public anchor" id="var-websocket-listener"><h3>websocket-listener</h3><div class="usage"><code>(websocket-listener {:keys [on-binary on-close on-error on-open on-ping on-pong on-text]})</code></div><div class="doc"><div class="markdown"><p>Builds a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html">Websocket.Listener</a>.</p>
<p>listener-fns is a map of keyword to function:</p>
<ul>
  <li><code>:on-binary</code> - See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html#onBinary%28java.net.http.WebSocket,java.nio.ByteBuffer,boolean%29">onBinary</a>. The <code>data</code> argument is converted from a <code>ByteBuffer</code> to a byte array before being passed to the function.</li>
  <li><code>:on-close</code> - See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html#onClose%28java.net.http.WebSocket,int,java.lang.String%29">onClose</a></li>
  <li><code>:on-error</code> - See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html#onError%28java.net.http.WebSocket,java.lang.Throwable%29">onError</a></li>
  <li><code>:on-open</code> - See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html#onOpen%28java.net.http.WebSocket%29">onOpen</a></li>
  <li><code>:on-ping</code> - See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html#onPing%28java.net.http.WebSocket,java.nio.ByteBuffer%29">onPing</a>. The <code>data</code> argument is converted from a <code>ByteBuffer</code> to a byte array before being passed to the function.</li>
  <li><code>:on-pong</code> - See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html#onPong%28java.net.http.WebSocket,java.nio.ByteBuffer%29">onPong</a>. The <code>data</code> argument is converted from a <code>ByteBuffer</code> to a byte array before being passed to the function.</li>
  <li><code>:on-text</code> - See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Listener.html#onText%28java.net.http.WebSocket,java.lang.CharSequence,boolean%29">onText</a>. The <code>data</code> argument is converted from a <code>CharSequence</code> to a string before being passed to the function.</li>
</ul></div></div></div></div></body></html>